---
page_title: 'Home - Plugin Development: Writing Log Output'
description: >-
  Write logs from your provider that help users debug issues and understand operations.
---

# Writing Log Output

Use the [`tflog` package](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog) to write logs for your provider. SDKs like the `terraform-plugin-framework`, `terraform-plugin-go`, and `terraform-plugin-sdk/v2` set up logging for you, so you only need to write the logs themselves.

!> **Warning:** Do not use `fmt.Println` and similar methods to log. They will silently fail, making the log output unavailable.

This page explains how to write log output at varying verbosity levels, add variables to logs, and designate logs that relate to distinct sections of code (e.g., the API client).

## Structured Logging

`tflog` uses _structured logging_, based on [`go-hclog`](https://pkg.go.dev/github.com/hashicorp/go-hclog). Rather that writing logs as sentences with embedded variabels and values, `tflog` takes a sentence describing the logging event and a set of variables to log. By separating the variables from the log description, you can programmatically parse, filter, and search your log output based on those variables. It also allows other parts of the system to associate variables with downstream log output.

## Logging Levels

You must choose a verbosity level for each line of log output. This lets you and other consumers [filter the log output](/plugin/log/filtering) from your provider by level. For example, you can set your provider to write only logs of type `Warn` during a Terraform run.

The following levels are listed from least verbose to most verbose.

### Error

Least verbose output that typically describes an unexpected condition prior to halting execution. Often, they provide more information about a user-facing error.

```go
tflog.Error(ctx, "unrecognized API response body")
```

### Warn

Output that describes an unexpected condition, but not one that should halt execution. Warn log output is intended for warnings. Good candidates are deprecations or environment issues.

```go
tflog.Warn(ctx, "API returned a 500 error, retrying")
```

### Info

Output that describes a certain logic condition or event. Good candidates for info logging are details about the environment your provider is running in or how it has been configured to run.

```go
tflog.Info(ctx, "operating against API version 1.2.3")
```

### Debug

Verbose output that typically describes important operational details like milestones in logic. Good candidates for Debug logging are behaviors that may confusing even though they are correct.

```go
tflog.Debug(ctx, "found two identical diagnostics in the response, deduplicating down to one")
```

### Trace

The most verbose output that describes the lowest level details of operation, such as intra-function steps or raw data.

```go
tflog.Trace(ctx, "creating the widget")
resp, err := client.CreateWidget(ctx)
if err != nil {
  panic(err)
}
tflog.Trace(ctx, "created the widget")
```

## Adding Variables

Use variables to attach information to specific logs or to a logger itself.

### Log Output

To specify machine parseable variables in the log output, add sets of key and value argument pairs after the log message. You can add as many key and value argument pairs as you need, but the key must always come before its associated value. The example below adds both a URL and a method for an associated API request.

```go
tflog.Trace(ctx, "executing API request", "url", "https://www.example.com/my/endpoint", "method", "POST")
```
You can use types other than strings as values, too:
  TOD: What are teh acceptable types? Are there any we don't support that might surprise folks?

```go
tflog.Trace(ctx, "executing API request", "url", "https://www.example.com/my/endpoint", "method", "POST", "size", 200, "authenticated", true, "headers", map[string][]string{"content-type": []string{"application/json"}})
```

### Logger Context

Loggers are transported using the `context.Context` variable, so injecting a variable into a logger returns a new `context.Context` variable containing the modified logger. Any calls to `tflog` using that logger will then implicitly include that variable. For example, the `terraform-plugin-go` library uses this method to assign a unique request ID to every RPC. This request ID that is included in all log output, allowing you to filter for logs associated with a specific request.

```go
newContext := tflog.With(ctx, "url", "https://www.example.com/my/endpoint")

// won't include the `url` variable
tflog.Debug(ctx, "this won't have the url variable attached")

// will include the `url` variable
tflog.Debug(newContext, "this will have the url variable attached")
```

## Subsystems

You may want to create a new subsystem for sections of code that are large, complex, or have distinct functionality. You can configure each subsystem to be included or excluded from log output using environment variables. For example, you may want to create a subsystem for logs that relate to the API client. These logs can be useful, but you may want the ability to turn them off when when debugging an unrelated issue.

### Create Subsystems

To create a new subsystem, pass context and the subsystem name to the `NewSubsystem()` method.

```go
// my-subsystem is the name of the subsystem
// it will be attached to all your logs
ctx = tflog.NewSubsystem(ctx, "my-subsystem")
```

Optionally, you can also specify a [logging level](#logging-levels) for the subsystem.

```go
ctx = tflog.NewSubsystem(ctx, "my-subsystem", hclog.Debug)
```

You can also configure an environment variable to control the logging level instead of hardcoding it into the subsystem.

```go
// read the level from TF_LOG_MYPROVIDER_CLIENT
ctx = tflog.NewSubsystem(ctx, "my-subsystem", tflog.WithLevelFromEnv("TF_LOG_MYPROVIDER_CLIENT"))
```

### Use Subsystems

Logging or adding variables to subsystem loggers requires separate function calls so the subsystem can be appropriately associated:

* [`tflog.SubsystemError()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemError): Equivalent to [`tflog.Error()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#Error), but using a subsystem logger.
* [`tflog.SubsystemWarn()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemWarn): Equivalent to [`tflog.Warn()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#Warn), but using a subsystem logger.
* [`tflog.SubsystemInfo()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemInfo): Equivalent to [`tflog.Info()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#Info), but using a subsystem logger.
* [`tflog.SubsystemDebug()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemDebug): Equivalent to [`tflog.Debug()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#Debug), but using a subsystem logger.
* [`tflog.SubsystemTrace()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemTrace): Equivalent to [`tflog.Trace()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#Trace), but using a subsystem logger.
* [`tflog.SubsystemWith()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemWith): Equivalent to [`tflog.With()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#With), but using a subsystem logger.

For example, use [`tflog.SubsystemDebug()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemDebug) to write a debug level log with a specific subsystem.

```go
tflog.SubsystemDebug(ctx, "my-subsystem", "writing to a subsystem", "meaning_of_life", 42)
```

Use [`tflog.SubsystemWith()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#SubsystemWith) to attach variables to a specific subsystem.

```go
// overwrite logger to include new `url` variable
ctx = tflog.SubsystemWith(ctx, "my-subsystem", "url", "https://www.example.com/my/endpoint")

// will include the `url` variable
tflog.SubsystemDebug(ctx, "my-subsystem", "Calling API")
```

Similar to [`tflog.With()`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-log/tflog#With), the context does not necessarily need to be overwritten if it is desirable to have separate logging contexts available.

```go
// create new logger that includes `url` variable
apiContext := tflog.SubsystemWith(ctx, "my-subsystem", "url", "https://www.example.com/my/endpoint")

// will not include the `url` variable
tflog.SubsystemDebug(ctx, "my-subsystem", "Calling database")

// will include the `url` variable
tflog.SubsystemDebug(apiContext, "my-subsystem", "Calling API")
```
