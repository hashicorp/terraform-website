---
page_title: 'Home - Plugin Development: Filtering Log Output'
description: >-
  Filter your provider's log outputs by subsystem and choose the log verbosity level.
---

# Filtering Log Output

Terraform, provider SDKs, and providers can all write logs that provide insight into operations and can help diagnose bugs. This page explains how to turn on logging for one or more of these subsystems and manage the location and content of logging data.

## Log Format

By default, logs are written as...
TODO: what's the difference between default and JSON format?

`JSON` will output logs in a machine-readable format. The format is not guaranteed to be stable between releases.
TOD: When we pass JSON, what verbosity level will happen?

TODO: Should we say a bit about how logs are written that makes them esier to parse? Are they prepended with their subsystem? Let's say we did TRACE verbosity - how can they tell which logs are relevant to them/filter?


## Setting the Output File Path

Use `TF_LOG_PATH` to specify a file path where the log output file should be written. If you do not specify a log path, Terraform writes the specified log output to your standard error.

Terraform can automatically create the output file at `TF_LOG_PATH` if it does not already exist. If the file does exist, Terraform adds new log output onto the end of the file without truncating the file contents.


## Logging Environment Variables

Logging is off for all subsystems by default. When you set one or more logging environment variables to a [verbosity level](#verbosity-levels-and-format), Terraform writes the specified logs for each Terraform run.

When you report bugs to issue trackers, we recommend setting `TF_LOG=TRACE`. This turns on logging for all loggers at their most verbose setting. However, you can use the additional environment variables to filter log output to specific subsystems or providers.

| Variable Name | Scope | Precedence and Usage Notes |
| --------------|-------------|-------------|
`TF_LOG` | Terraform, the SDKs, and all providers | Overrides all other logging environment variables. |
| `TF_LOG_CORE` | Terraform binary, excluding providers | Only works if `TF_LOG` is not set.|
| `TF_LOG_PROVIDER` | All providers used during the run | Overrides provider-specific and SDK-specific logging environment variables.|
| `TF_LOG_PROVIDER_{PROVIDER_NAME}`| Single provider (e.g., `TF_LOG_PROVIDER_AWS`) | Only applies to providers that write logs using the `tflog` package. Does not affect logs written by legacy `log.Print*` functions. |
|`TF_LOG_SDK` | Provider SDKs for all providers used in the run | Overriden by SDK-specific environment variables. Only affects logs written with `terraform-plugin-log`. It does not yet apply to a large number of logs written by SDKv2 that use `TF_LOG` or `TF_LOG_PROVIDER` as their level. |
`TF_LOG_SDK_PROTO` | [`terraform-plugin-go`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-go) | Overrides `TF_LOG_SDK` for logs written by `terraform-plugin-go` only. |
| `TF_LOG_SDK_HELPER_SCHEMA`| `helper/schema` package in [`terraform-plugin-sdk/v2`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-sdk/v2/helper/schema)  | Only affects logs written with `terraform-plugin-log`. It does not yet apply to a large number of logs written by SDKv2 that still use `TF_LOG` or `TF_LOG_PROVIDER`. |
|`TF_LOG_SDK_MUX`| [`terraform-plugin-mux`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-mux) module | Overrides `TF_LOG_SDK` for logs written by `terraform-plugin-mux` only.

## Logging Levels

Pass the following values to the [logging environment variables](#logging-environment-variables) to set the verbosity level of its log output. They are listed in order of least verbose to most verbose:

- **`OFF`**: Turns off logging for that logger.
- **`ERROR`**: Least verbose, typically provides more detail about user-facing errors.
- **`WARN`**: Typically includes warnings about deprecations or other environment problems that could cause future issues.
- **`INFO`**: Can include details about run environment or configuration.
- **`DEBUG`**: Can include additional details about behavior, especially behaviors that may be non-intuitive.
- **`TRACE`**: Most verbose, and typically includes low-level execution steps.

## Adding Request Metadata

Use the `With()` method to embed values into every log output line associated with a particular request. This lets you more easily filter the output.

The following example sets the `example_id` key set to `123`. Any subsequent `tflog` calls will now include this value in every log line printed for that request.

```
ctx = tflog.With(ctx, "example_id", 123)
```

TODO: Can we include a snippet of example output in a code block so folks can see what this will look like?


## Testing

While testing, Terraform ignores `TF_LOG_CORE`, and logging environment variables only control the log output for the provider under test.

Use the following environment variables to change where and how Terraform stores log outputs from tests.

  - `TF_ACC_LOG_PATH`: Set a path to write all log output from Terraform, plugin SDKs, and all providers in the run. Terraform will generate the output at the `TRACE` verbosity level.

  - `TF_LOG_PATH_MASK`: Set to a file path containing `%s` to write test output to that path. Replace the `%s` with each test's name to write only that test's output to the file.
