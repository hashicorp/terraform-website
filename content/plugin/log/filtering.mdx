---
page_title: 'Home - Plugin Development: Filtering Log Output'
description: >-
  Filter your provider's log outputs by subsystem and choose the log verbosity level.
---

# Filtering Log Output

Terraform, provider SDKs, and providers can all write logs that provide insight into operations and can help you diagnose bugs. Logging is off for all subsystems by default. This page explains how to turn on logging for one or more of these subsystems and manage logging output.


## Logging Environment Variables

To write log data for a Terraform run, set one or more of the logging environment variables below to either [`JSON` format](#log-format) or a [verbosity level](#logging-levels).

When you report bugs to issue trackers, we recommend setting `TF_LOG=TRACE`. This turns on all loggers at their most verbose setting. To write only a subset of log output (e.g., for a single provider), do not set `TF_LOG` and instead set specific logging environment variables for your use case.

Some environment variables take precedence over others. For example, if you set `TF_LOG_PROVIDER=TRACE` and `TF_LOG_PROVIDER_AZUREM=WARN`, all provider logs will be written at the `TRACE` level because `TF_LOG_PROVIDER` takes precedence.

| Variable | Logs Written By | Precedence and Usage |
| --------------|-------------|-------------|
`TF_LOG` | Terraform, the SDKs, and all providers | Overrides all other logging environment variables. |
| `TF_LOG_CORE` | Terraform binary | Does not include providers. |
| `TF_LOG_PROVIDER` | All providers used during the run | Overrides logging environment variables for specific providers (e.g., `TF_LOG_PROVIDER_AWS`) and provider SDKs (e.g., `TF_LOG_PROTO`).|
| `TF_LOG_PROVIDER_{PROVIDER_NAME}` (e.g., `TF_LOG_PROVIDER_AWS`)| Specific provider  | Only applies to providers that write logs using the `tflog` package. Does not affect logs written by legacy `log.Print*` functions. |
|`TF_LOG_SDK` | Provider SDKs for all providers used in the run | Only applies to logs written with `terraform-plugin-log`. For remaining SDKV2 logs, use `TF_LOG` or `TF_LOG_PROVIDER`. |
`TF_LOG_SDK_PROTO` | [`terraform-plugin-go`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-go) | Overrides `TF_LOG_SDK. |
| `TF_LOG_SDK_HELPER_SCHEMA`| [`terraform-plugin-sdk/v2`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-sdk/v2/helper/schema) `helper/schema` package | Overrides `TF_LOG_SDK`. Only applies to logs written with `terraform-plugin-log`. For remaining SDKV2 logs, use `TF_LOG` or `TF_LOG_PROVIDER`. |
|`TF_LOG_SDK_MUX`| [`terraform-plugin-mux`](https://pkg.go.dev/github.com/hashicorp/terraform-plugin-mux)| Overrides `TF_LOG_SDK`.

## Logging Levels

To specify logging verbosity, set a [logging environment variable](#logging-environment-variables) to one of the following values. The values are listed in order of least verbose to most verbose:

- **`OFF`** - Turns off logging for that logger.
- **`ERROR`** - Least verbose, typically provides more detail about user-facing errors.
- **`WARN`** - Typically includes warnings about deprecations or other environment problems.
- **`INFO`** - Can include details about run environment or configuration.
- **`DEBUG`** - Can include additional details about behavior, especially behaviors that may be non-intuitive.
- **`TRACE`** - Most verbose, and typically includes low-level execution steps.

This example sets the loggers for all providers used in the run to `WARN` verbosity.

```
TF_LOG_PROVIDER=WARN
```

## Log Format

By default, logs are written as...
TODO: what's the difference between default and JSON format?

`JSON` will output logs in a machine-readable format. The format is not guaranteed to be stable between releases.
TOD: When we pass JSON, what verbosity level will happen?

TODO: Should we say a bit about how logs are written that makes them esier to parse? Are they prepended with their subsystem? Let's say we did TRACE verbosity - how can they tell which logs are relevant to them/filter?


## Adding Request Metadata

Use the `With()` method to embed values into every log output line associated with a particular request. This lets you more easily filter the output.

The following example sets the `example_id` key set to `123`. Any subsequent `tflog` calls will now include this value in every log line printed for that request.

```
ctx = tflog.With(ctx, "example_id", 123)
```

TODO: Can we include a snippet of example output in a code block so folks can see what this will look like?

## Setting the Output File Path

Use `TF_LOG_PATH` to specify a file path where the log output file should be written. If you do not specify a log path, Terraform writes the specified log output to your standard error.

Terraform can automatically create the output file at `TF_LOG_PATH` if it does not already exist. If the file does exist, Terraform adds new log output onto the end of the file without truncating the file contents.


## Testing

While testing, Terraform ignores `TF_LOG_CORE`, and logging environment variables only control the log output for the provider under test.

Use the following environment variables to change where and how Terraform stores log outputs from tests.

  - `TF_ACC_LOG_PATH`: Specify a path to write all log output from Terraform, plugin SDKs, and all providers in the run. Terraform will generate the output at the `TRACE` verbosity level.

  - `TF_LOG_PATH_MASK`: Specify a file path containing `%s` to write test output to that path. Replace the `%s` with each test's name to write only that test's output to the file.
