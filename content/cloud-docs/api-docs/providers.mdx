---
page_title: Providers - API Docs - Terraform Cloud and Terraform Enterprise
description: >-
  You can add public providers to your organization's private registry. Create,
  read, update, and delete public providers with the Terraform Cloud API.
---

[200]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200

[201]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201

[202]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/202

[204]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204

[400]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400

[401]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

[403]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

[404]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404

[409]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409

[412]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/412

[422]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

[429]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429

[500]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

[504]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504

[JSON API document]: /cloud-docs/api-docs#json-api-documents

[JSON API error object]: https://jsonapi.org/format/#error-objects

# Registry Providers API

You can add providers from the public [Terraform Registry](https://registry.terraform.io/) to your Terraform Cloud private registry. Once added, Terraform Cloud automatically synchronizes public providers with their source on the Terraform Registry.

All members of an organization can view and use public providers and modules, but you need [owners team](/cloud-docs/users-teams-organizations/permissions#organization-owners) permissions to add them to the private registry.

## Terraform Cloud Registry Implementation

For publicly curated providers, the Terraform Cloud Registry acts as a proxy to the [Terraform Registry](https://registry.terraform.io) for the following:

- The public registry discovery endpoints have the path prefix provided in the [discovery document](/registry/api-docs#service-discovery) which is currently `/api/registry/public/v1`.
- [Authentication](/cloud-docs/api-docs/#authentication) is handled the same as all other Terraform Cloud endpoints.

## List public Terraform Registry Providers for an Organization

`GET /organizations/:organization_name/registry-providers`

### Parameters

| Parameter            | Description                                                    |
| -------------------- | -------------------------------------------------------------- |
| `:organization_name` | The name of the organization to list available providers from. |


Lists the public and private providers  included in the private registry for the specified organization. 

| Status  | Response                                             | Reason                                                     |
| ------- | ---------------------------------------------------- | ---------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                 |
| [404][] | [JSON API error object][]                            | Providers not found or user unauthorized to perform action |

### Query Parameters

This endpoint supports pagination [with standard URL query parameters](/cloud-docs/api-docs/#query-parameters). Remember to percent-encode `[` as `%5B` and `]` as `%5D` if your tooling doesn't automatically encode URLs.

| Parameter            | Description                                                                                                                                            |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `q`                  | **Optional.** A search query string.  Providers are searchable by both their name and their namespace fields.                                          |
| `filter[field name]` | **Optional.** If specified, restricts results to those with the matching field name value.  Valid values are `registry_name`, and `organization_name`. |
| `page[number]`       | **Optional.** If omitted, the endpoint will return the first page.                                                                                     |
| `page[size]`         | **Optional.** If omitted, the endpoint will return 20 registry providers per page.                                                                     |

### Sample Request

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  https://app.terraform.io/api/v2/organizations/my-organization/registry-providers
```

### Sample Response

```json
{
  "data": [
    {
      "id": "prov-kwt1cBiX2SdDz38w",
      "type": "registry-providers",
      "attributes": {
        "name": "aws",
        "namespace": "my-organization",
        "created-at": "2021-04-07T19:01:18.528Z",
        "updated-at": "2021-04-07T19:01:19.863Z",
        "registry-name": "public",
        "permissions": {
          "can-delete": true
        }
      },
      "relationships": {
        "organization": {
          "data": {
            "id": "my-organization",
            "type": "organizations"
          }
        }
      },
      "links": {
        "self": "/api/v2/organizations/my-organization/registry-providers/public/my-organization/aws"
      }
    },
    {
      "id": "prov-PopQnMtYDCcd3PRX",
      "type": "registry-providers",
      "attributes": {
        "name": "aurora",
        "namespace": "my-organization",
        "created-at": "2021-04-07T19:04:41.375Z",
        "updated-at": "2021-04-07T19:04:42.828Z",
        "registry-name": "public",
        "permissions": {
          "can-delete": true
        }
      },
      "relationships": {
        "organization": {
          "data": {
            "id": "my-organization",
            "type": "organizations"
          }
        }
      },
      "links": {
        "self": "/api/v2/organizations/my-organization/registry-providers/public/my-organization/aurora"
      }
    },
    ...,
  ],
  "links": {
    "self": "https://app.terraform.io/api/v2/organizations/my-organization/registry-providers?page%5Bnumber%5D=1&page%5Bsize%5D=6",
    "first": "https://app.terraform.io/api/v2/organizations/my-organization/registry-providers?page%5Bnumber%5D=1&page%5Bsize%5D=6",
    "prev": null,
    "next": "https://app.terraform.io/api/v2/organizations/my-organization/registry-providers?page%5Bnumber%5D=2&page%5Bsize%5D=6",
    "last": "https://app.terraform.io/api/v2/organizations/my-organization/registry-providers?page%5Bnumber%5D=29&page%5Bsize%5D=6"
  },
  "meta": {
    "pagination": {
      "current-page": 1,
      "page-size": 6,
      "prev-page": null,
      "next-page": 2,
      "total-pages": 29,
      "total-count": 169
    }
  }
}
```

## Create a Provider

`POST /organizations/:organization_name/registry-providers`

### Parameters

| Parameter            | Description                                                                                                                                                                                                |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization to create a provider in. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team. |

[permissions-citation]: #intentionally-unused---keep-for-maintainers

#### Private Providers
The private provider record will be available in the organization's registry provider list immediately after creation, but you must create a version and upload all necessary release assets before consumers can use the provider in configurations. Release assets include the `SHA256SUMS` file, the `SHA256SUMS.sig` file, and the GPG signing key. Refer to the [Publishing a Private Provider](/cloud-docs/registry/publish-providers) documentation for more details.

The private registry does not automatically update private providers when you release new versions. You must explicitly create and upload each new version with the [Create a Provider Version](#create-a-provider-version) endpoint.

#### Public Providers

When created, the public provider record will be available in the organization's registry provider list. You cannot create versions for public providers; you must use the versions available on the Terraform Registry.

| Status  | Response                                             | Reason                                                         |
| ------- | ---------------------------------------------------- | -------------------------------------------------------------- |
| [201][] | [JSON API document][] (`type: "registry-providers"`) | Successfully published provider                                |
| [422][] | [JSON API error object][]                            | Malformed request body (missing attributes, wrong types, etc.) |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled                  |
| [404][] | [JSON API error object][]                            | User not authorized                                            |

### Request Body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                        | Type   | Default | Description                                                                                                  |
| ------------------------------- | ------ | ------- | ------------------------------------------------------------------------------------------------------------ |
| `data.type`                     | string |         | Must be `"registry-providers"`.                                                                              |
| `data.attributes.name`          | string |         | The name of the provider.                                                                                    |
| `data.attributes.namespace`     | string |         | The namespace of the provider. For private providers this is the same as the `:organization_name` parameter. |
| `data.attributes.registry-name` | string |         | Whether this is a publicly maintained provider or private. Must be either `public` or `private`.             |

### Sample Payload (Private Provider)

```json
{
  "data": {
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "registry-name": "private"
    }
  }
}
```

### Sample Payload (Public Provider)

```json
{
  "data": {
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "registry-name": "public"
    }
  }
}
```

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/v2/organizations/my-organization/registry-providers
```

### Sample Response (Private Provider)

```json
{
  "data": {
    "id": "prov-cmEmLstBfjNNA9F3",
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "registry-name": "private",
      "version-statuses": [],
      "created-at": "2022-02-11T19:16:59.533Z",
      "updated-at": "2022-02-11T19:16:59.533Z",
      "permissions": {
        "can-delete": true
      }
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "hashicorp",
          "type": "organizations"
        }
      },
      "versions": {
        "data": [],
        "links": {
          "related": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws"
    }
  }
}
```

### Sample Response (Public Provider)

```json
{
  "data": {
    "id": "prov-fZn7uHu99ZCpAKZJ",
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "registry-name": "public",
      "created-at": "2020-07-09T19:36:56.288Z",
      "updated-at": "2020-07-09T19:36:56.288Z",
      "permissions": {
        "can-delete": true
      }
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "my-organization",
          "type": "organizations"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/my-organization/registry-providers/public/hashicorp/aws"
    }
  }
}
```

## Add a GPG Key (Private Provider)

`POST /api/registry/:registry_name/v2/gpg-keys`

### Parameters

| Parameter            | Description          |
| -------------------- | -------------------- |
| `:registry_name`     | Must be `private`.   |

Uploads a GPG Key to a private provider. The response will provider a "key-id" which is needed to [Create a Provider Version](#create-a-provider-version) (see below).

| Status  | Response                                                   | Reason                                                         |
| ------- | ---------------------------------------------------------- | -------------------------------------------------------------- |
| [201][] | [JSON API document][] (`type: "gpg-keys"`)                 | Successfully uploads a GPG key to a private provider           |
| [422][] | [JSON API error object][]                                  | Malformed request body (missing attributes, wrong types, etc.) |
| [403][] | [JSON API error object][]                                  | Forbidden - not available for public providers                 |
| [404][] | [JSON API error object][]                                  | User not authorized                                            |

### Request Body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                      | Type   | Default | Description                                                                                  |
| ----------------------------- | ------ | ------- | -------------------------------------------------------------------------------------------- |
| `data.type`                   | string |         | Must be `"gpg-keys"`.                                                                        |
| `data.attributes.namespace`   | string |         | The namespace of the provider. Must be the same as the `organization_name` for the provider. |
| `data.attributes.ascii-armor` | string |         | A valid gpg-key string.                                                                      |

### Sample Payload

```json
{
  "data": {
    "attributes": {
      "namespace": "hashicorp",
      "ascii-armor": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINB...=txfz\n-----END PGP PUBLIC KEY BLOCK-----\n"
    },
    "type": "gpg-keys"
  }
}
```

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/registry/private/v2/gpg-keys
```

### Sample Response

```json
{
  "data": {
    "type": "gpg-keys",
    "id": "23",
    "attributes": {
      "ascii-armor": "-----BEGIN PGP PUBLIC KEY BLOCK-----\n\nmQINB...=txfz\n-----END PGP PUBLIC KEY BLOCK-----\n",
      "created-at": "2022-02-11T19:16:59Z",
      "key-id": "32966F3FB5AC1129",
      "namespace": "hashicorp",
      "source": "",
      "source-url": null,
      "trust-signature": "",
      "updated-at": "2022-02-11T19:16:59Z"
    },
    "links": {
      "self": "/v2/gpg-keys/23"
    }
  }
}
```

## Create a Provider Version

`POST /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions`

### Parameters

| Parameter            | Description                                                                                                                                                                                                |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization to create a provider in. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team. |
| `:registry_name`     | Must be `private`.                                                                                                                                                                                         |
| `:namespace`         | The namespace of the provider for which the version is being created. For private providers this is the same as the `:organization_name` parameter.                                                        |
| `:name`              | The name of the provider for which the version is being created.                                                                                                                                           |


Creates a new registry provider version. This endpoint only applies to private providers.

| Status  | Response                                                   | Reason                                                         |
| ------- | ---------------------------------------------------------- | -------------------------------------------------------------- |
| [201][] | [JSON API document][] (`type: "registry-provider-versions"`) | Successfully published provider version                      |
| [422][] | [JSON API error object][]                                  | Malformed request body (missing attributes, wrong types, etc.) |
| [403][] | [JSON API error object][]                                  | Forbidden - not available for public providers                 |
| [404][] | [JSON API error object][]                                  | User not authorized                                            |

### Request Body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                    | Type   | Default | Description                                                       |
| --------------------------- | ------ | ------- | ----------------------------------------------------------------- |
| `data.type`                 | string |         | Must be `"registry-provider-versions"`.                           |
| `data.attributes.version`   | string |         | A valid semver version string.                                    |
| `data.attributes.key-id`    | string |         | A valid gpg-key string.                                           |
| `data.attributes.protocols` | array  |         | Must be one or all of the following values `["4.0","5.0","6.0"]`. |

### Sample Payload

```json
{
  "data": {
    "type": "registry-provider-versions",
    "attributes": {
      "version": "3.1.1",
      "key-id": "32966F3FB5AC1129",
      "protocols": ["4.0"]
    }
  }
}
```

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions
```

### Sample Response

```json
{
  "data": {
    "id": "provver-y5KZUsSBRLV9zCtL",
    "type": "registry-provider-versions",
    "attributes": {
      "version": "3.1.1",
      "created-at": "2022-02-11T19:16:59.876Z",
      "updated-at": "2022-02-11T19:16:59.876Z",
      "key-id": "32966F3FB5AC1129",
      "protocols": ["4.0"],
      "permissions": {
        "can-delete": true,
        "can-upload-asset": true
      },
      "shasums-uploaded": false,
      "shasums-sig-uploaded": false
    },
    "relationships": {
      "registry-provider": {
        "data": {
          "id": "prov-cmEmLstBfjNNA9F3",
          "type": "registry-providers"
        }
      },
      "platforms": {
        "data": [],
        "links": {
          "related": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms"
        }
      }
    },
    "links": {
      "shasums-upload": "https://archivist.terraform.io/v1/object/dmF1b...",
      "shasums-sig-upload": "https://archivist.terraform.io/v1/object/dmF1b..."
    }
  }
}

```

## Get All Versions For a Single Provider (Private Provider)

`GET /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/`

### Parameters

| Parameter            | Description                                                                                  |
| -------------------- | -------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization the provider belongs to.                                        |
| `:registry_name`     | Must be `private`.                                                                           |
| `:namespace`         | The namespace of the provider. Must be the same as the `organization_name` for the provider. |
| `:name`              | The provider name.                                                                           |

| Status  | Response                                             | Reason                                                    |
| ------- | ---------------------------------------------------- | --------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled             |
| [404][] | [JSON API error object][]                            | Provider not found or user unauthorized to perform action |

### Sample Request 

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions
```

### Sample Response

```json
{
  "data": [
    {
      "id": "provver-y5KZUsSBRLV9zCtL",
      "type": "registry-provider-versions",
      "attributes": {
        "version": "3.1.1",
        "created-at": "2022-02-11T19:16:59.876Z",
        "updated-at": "2022-02-11T19:16:59.876Z",
        "key-id": "32966F3FB5AC1129",
        "protocols": ["4.0"],
        "permissions": {
          "can-delete": true,
          "can-upload-asset": true
        },
        "shasums-uploaded": true,
        "shasums-sig-uploaded": true
      },
      "relationships": {
        "registry-provider": {
          "data": {
            "id": "prov-cmEmLstBfjNNA9F3",
            "type": "registry-providers"
          }
        },
        "platforms": {
          "data": [
            {
              "id": "provpltfrm-GSHhNzptr9s3WoLD",
              "type": "registry-provider-platforms"
            },
            {
              "id": "provpltfrm-A1PHitiM2KkKpVoM",
              "type": "registry-provider-platforms"
            },
            {
              "id": "provpltfrm-BLJWvWyJ2QMs525k",
              "type": "registry-provider-platforms"
            },
            {
              "id": "provpltfrm-qQYosUguetYtXGzJ",
              "type": "registry-provider-platforms"
            },
            {
              "id": "provpltfrm-pjDHFN46y193bS7t",
              "type": "registry-provider-platforms"
            }
          ],
          "links": {
            "related": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms"
          }
        }
      },
      "links": {
        "shasums-download": "https://archivist.terraform.io/v1/object/dmF1b...",
        "shasums-sig-download": "https://archivist.terraform.io/v1/object/dmF1b..."
      }
    }
  ],
  "links": {
    "self": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions?page%5Bnumber%5D=1&page%5Bsize%5D=20",
    "first": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions?page%5Bnumber%5D=1&page%5Bsize%5D=20",
    "prev": null,
    "next": null,
    "last": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions?page%5Bnumber%5D=1&page%5Bsize%5D=20"
  },
  "meta": {
    "pagination": {
      "current-page": 1,
      "page-size": 20,
      "prev-page": null,
      "next-page": null,
      "total-pages": 1,
      "total-count": 1
    }
  }
}
```
### Note

`shasums-uploaded` and `shasums-sig-uploaded` will be false if those files haven't been uploaded to Archivist yet. In this case, instead of including links to `shasums-download` and `shasums-sig-download`, the response will include upload links (`shasums-upload` and `shasums-sig-upload`).

## Get Version (Private Provider)

`GET /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:version`

### Parameters

| Parameter            | Description                                                                                  |
| -------------------- | -------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization the provider belongs to.                                        |
| `:registry_name`     | Must be `private`.                                                                           |
| `:namespace`         | The namespace of the provider. Must be the same as the `organization_name` for the provider. |
| `:name`              | The provider name.                                                                           |
| `:version`           | The pversion of the provider being created to which different platforms can be added.        |

| Status  | Response                                             | Reason                                                    |
| ------- | ---------------------------------------------------- | --------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled             |
| [404][] | [JSON API error object][]                            | Provider not found or user unauthorized to perform action |

### Sample Request 

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1
```

### Sample Response

```json
{
  "data": {
    "id": "provver-y5KZUsSBRLV9zCtL",
    "type": "registry-provider-versions",
    "attributes": {
      "version": "3.1.1",
      "created-at": "2022-02-11T19:16:59.876Z",
      "updated-at": "2022-02-11T19:16:59.876Z",
      "key-id": "32966F3FB5AC1129",
      "protocols": ["4.0"],
      "permissions": {
        "can-delete": true,
        "can-upload-asset": true
      },
      "shasums-uploaded": true,
      "shasums-sig-uploaded": true
    },
    "relationships": {
      "registry-provider": {
        "data": {
          "id": "prov-cmEmLstBfjNNA9F3",
          "type": "registry-providers"
        }
      },
      "platforms": {
        "data": [
          {
            "id": "provpltfrm-GSHhNzptr9s3WoLD",
            "type": "registry-provider-platforms"
          },
          {
            "id": "provpltfrm-A1PHitiM2KkKpVoM",
            "type": "registry-provider-platforms"
          },
          {
            "id": "provpltfrm-BLJWvWyJ2QMs525k",
            "type": "registry-provider-platforms"
          },
          {
            "id": "provpltfrm-qQYosUguetYtXGzJ",
            "type": "registry-provider-platforms"
          },
          {
            "id": "provpltfrm-pjDHFN46y193bS7t",
            "type": "registry-provider-platforms"
          }
        ],
        "links": {
          "related": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms"
        }
      }
    },
    "links": {
      "shasums-download": "https://archivist.terraform.io/v1/object/dmF1b...",
      "shasums-sig-download": "https://archivist.terraform.io/v1/object/dmF1b..."
    }
  }
}
```

### Note

`shasums-uploaded` and `shasums-sig-uploaded` will be false if those files haven't been uploaded to Archivist yet. In this case, instead of including links to `shasums-download` and `shasums-sig-download`, the response will include upload links (`shasums-upload` and `shasums-sig-upload`).


## Delete a Version (Private Provider)

`DELETE /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:provider_version`

### Parameters

| Parameter            | Description                                                                                                                                                                                                          |
| -------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization to delete a provider version from. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team. |
| `:registry_name`     | Must be `private`.                                                                                                                                                                                                   |
| `:namespace`         | The namespace of the provider for which the version is being deleted. For private providers this is the same as the `:organization_name` parameter.                                                                  |
| `:name`              | The name of the provider for which the version is being destroyed.                                                                                                                                                   |
| `:version`           | The version for the provider that will be deleted along with its corresponding platforms.                                                                                                                            |


[permissions-citation]: #intentionally-unused---keep-for-maintainers

| Status  | Response                  | Reason                                                      |
| ------- | ------------------------- | ----------------------------------------------------------- |
| [204][] | Nothing                   | Success                                                     |
| [403][] | [JSON API error object][] | Forbidden - public provider curation disabled               |
| [404][] | [JSON API error object][] | Provider not found or user not authorized to perform action |


### Sample Request 

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request DELETE \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/public/hashicorp/aws/versions/3.1.1
```


## Create a Provider Platform (Private Provider)

`POST /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:version/platforms`

### Parameters

| Parameter            | Description                                                                                                                                                                                                         |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization to create a provider platform in. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team. |
| `:registry_name`     | Must be `private`.                                                                                                                                                                                                  |
| `:namespace`         | The namespace of the provider for which the platform is being created. For private providers this is the same as the `:organization_name` parameter.                                                                |
| `:name`              | The name of the provider for which the platform is being created.                                                                                                                                                   |
| `:version`           | The provider version of the provider for which the platform is being created.                                                                                                                                       |

Creates a new registry provider platform. This endpoint only applies to private providers.

| Status  | Response                                                      | Reason                                                         |
| ------- | ------------------------------------------------------------- | -------------------------------------------------------------- |
| [201][] | [JSON API document][] (`type: "registry-provider-platforms"`) | Successfully published provider platform                       |
| [422][] | [JSON API error object][]                                     | Malformed request body (missing attributes, wrong types, etc.) |
| [403][] | [JSON API error object][]                                     | Forbidden - not available for public providers                 |
| [404][] | [JSON API error object][]                                     | User not authorized                                            |

### Request Body

This POST endpoint requires a JSON object with the following properties as a request payload.

Properties without a default value are required.

| Key path                   | Type   | Default  | Description                              |
| -------------------------  | ------ | -------  | -------------------------------------    |
| `data.type`                | string |          | Must be `"registry-provider-platforms"`. |
| `data.attributes.os`       | string |          | A valid semver version string.           |
| `data.attributes.arch`     | string |          | A valid os string.                       |
| `data.attributes.shasum`   | string |          | A valid shasum string.                   |
| `data.attributes.filename` | string |          | A valid filename string.                 |


### Sample Payload

```json
{
  "data": {
    "type": "registry-provider-version-platforms",
    "attributes": {
      "os": "linux",
      "arch": "amd64",
      "shasum": "8f69533bc8afc227b40d15116358f91505bb638ce5919712fbb38a2dec1bba38",
      "filename": "terraform-provider-aws_3.1.1_linux_amd64.zip"
    }
  }
}
```

### Sample Request

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request POST \
  --data @payload.json \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms
```

### Sample Response

```json
{
  "data": {
    "id": "provpltfrm-BLJWvWyJ2QMs525k",
    "type": "registry-provider-platforms",
    "attributes": {
      "os": "linux",
      "arch": "amd64",
      "filename": "terraform-provider-aws_3.1.1_linux_amd64.zip",
      "shasum": "8f69533bc8afc227b40d15116358f91505bb638ce5919712fbb38a2dec1bba38",
      "permissions": {
        "can-delete": true,
        "can-upload-asset": true
      },
      "provider-binary-uploaded": false
    },
    "relationships": {
      "registry-provider-version": {
        "data": {
          "id": "provver-y5KZUsSBRLV9zCtL",
          "type": "registry-provider-versions"
        }
      }
    },
    "links": {
      "provider-binary-upload": "https://archivist.terraform.io/v1/object/dmF1b..."
    }
  }
}

```

## Get all platforms for a single version (Private Provider)

`GET /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:version/platforms`

### Parameters

| Parameter            | Description                                                                                  |
| -------------------- | -------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization the provider belongs to.                                        |
| `:registry_name`     | Must be `private`.                                                                           |
| `:namespace`         | The namespace of the provider. Must be the same as the `organization_name` for the provider. |
| `:name`              | The provider name.                                                                           |
| `:version`           | The version of the provider.                                                                 |

| Status  | Response                                             | Reason                                                    |
| ------- | ---------------------------------------------------- | --------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled             |
| [404][] | [JSON API error object][]                            | Provider not found or user unauthorized to perform action |

### Sample Request 

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms
```

### Sample Response

```json
{
  "data": [
    {
      "id": "provpltfrm-GSHhNzptr9s3WoLD",
      "type": "registry-provider-platforms",
      "attributes": {
        "os": "darwin",
        "arch": "amd64",
        "filename": "terraform-provider-aws_3.1.1_darwin_amd64.zip",
        "shasum": "fd580e71bd76d76913e1925f2641be9330c536464af9a08a5b8994da65a26cbc",
        "permissions": {
          "can-delete": true,
          "can-upload-asset": true
        },
        "provider-binary-uploaded": true
      },
      "relationships": {
        "registry-provider-version": {
          "data": {
            "id": "provver-y5KZUsSBRLV9zCtL",
            "type": "registry-provider-versions"
          }
        }
      },
      "links": {
        "provider-binary-download": "https://archivist.terraform.io/v1/object/dmF1b..."
      }
    },
    {
      "id": "provpltfrm-A1PHitiM2KkKpVoM",
      "type": "registry-provider-platforms",
      "attributes": {
        "os": "darwin",
        "arch": "arm64",
        "filename": "terraform-provider-aws_3.1.1_darwin_arm64.zip",
        "shasum": "de3c351d7f35a3c8c583c0da5c1c4d558b8cea3731a49b15f63de5bbbafc0165",
        "permissions": {
          "can-delete": true,
          "can-upload-asset": true
        },
        "provider-binary-uploaded": true
      },
      "relationships": {
        "registry-provider-version": {
          "data": {
            "id": "provver-y5KZUsSBRLV9zCtL",
            "type": "registry-provider-versions"
          }
        }
      },
      "links": {
        "provider-binary-download": "https://archivist.terraform.io/v1/object/dmF1b..."
      }
    }
  ],
  "links": {
    "self": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms?page%5Bnumber%5D=1&page%5Bsize%5D=20",
    "first": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms?page%5Bnumber%5D=1&page%5Bsize%5D=20",
    "prev": null,
    "next": null,
    "last": "https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms?page%5Bnumber%5D=1&page%5Bsize%5D=20"
  },
  "meta": {
    "pagination": {
      "current-page": 1,
      "page-size": 20,
      "prev-page": null,
      "next-page": null,
      "total-pages": 1,
      "total-count": 2
    }
  }
}
```

### Note

`provider-binary-uploaded` will be `false` if that file hasn't been uploaded to Archivist yet. In this case, instead of including a link to `provider-binary-download`, the response will include an upload link `provider-binary-upload`.

## Get Platform (Private Provider)

`GET /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:version/platforms/:os/:arch`

### Parameters

| Parameter            | Description                                                                                  |
| -------------------- | -------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization the provider belongs to.                                        |
| `:registry_name`     | Must be `private`.                                                                           |
| `:namespace`         | The namespace of the provider. Must be the same as the `organization_name` for the provider. |
| `:name`              | The provider name.                                                                           |
| `:version`           | The version of the provider.                                                                 |
| `:os`                | The os of the provider platform.                                                             |
| `:arch`              | The architecture of the provider platform.                                                   |

| Status  | Response                                             | Reason                                                    |
| ------- | ---------------------------------------------------- | --------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled             |
| [404][] | [JSON API error object][]                            | Provider not found or user unauthorized to perform action |

### Sample Request (Private Provider)

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms/linux/amd64
```

### Sample Response

```json
{
  "data": {
    "id": "provpltfrm-BLJWvWyJ2QMs525k",
    "type": "registry-provider-platforms",
    "attributes": {
      "os": "linux",
      "arch": "amd64",
      "filename": "terraform-provider-aws_3.1.1_linux_amd64.zip",
      "shasum": "8f69533bc8afc227b40d15116358f91505bb638ce5919712fbb38a2dec1bba38",
      "permissions": {
        "can-delete": true,
        "can-upload-asset": true
      },
      "provider-binary-uploaded": true
    },
    "relationships": {
      "registry-provider-version": {
        "data": {
          "id": "provver-y5KZUsSBRLV9zCtL",
          "type": "registry-provider-versions"
        }
      }
    },
    "links": {
      "provider-binary-download": "https://archivist.terraform.io/v1/object/dmF1b..."
    }
  }
}
```

### Note

`provider-binary-uploaded` will be `false` if that file hasn't been uploaded to Archivist yet. In this case, instead of including a link to `provider-binary-download`, the response will include an upload link `provider-binary-upload`.

## Delete Platform (Private Provider)

`DELETE /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name/versions/:version/platforms/:os/:arch`

### Parameters

| Parameter            | Description                                                                                                                                                                                                            |
| -------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:organization_name` | The name of the organization to delete a provider platform from. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team.  |
| `:registry_name`     | Must be `private`.                                                                                                                                                                                                     |
| `:namespace`         | The namespace of the provider for which the platform is being deleted. For private providers this is the same as the `:organization_name` parameter.                                                                   |
| `:name`              | The name of the provider for which the platform is being destroyed.                                                                                                                                                    |
| `:version`           | The version for which the platform is being destroyed.                                                                                                                                                                 |
| `:os`                | The os of the provider platform that is being destroyed.                                                                                                                                                               |
| `:arch`              | The architecture of the provider platform that is being destroyed.                                                                                                                                                     |

[permissions-citation]: #intentionally-unused---keep-for-maintainers

| Status  | Response                  | Reason                                                      |
| ------- | ------------------------- | ----------------------------------------------------------- |
| [204][] | Nothing                   | Success                                                     |
| [403][] | [JSON API error object][] | Forbidden - public provider curation disabled               |
| [404][] | [JSON API error object][] | Provider not found or user not authorized to perform action |


### Sample Request 

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request DELETE \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws/versions/3.1.1/platforms/linux/amd64
```

## Get a Provider

`GET /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name`

### Parameters

| Parameter            | Description                                                                                                  |
| -------------------- | ------------------------------------------------------------------------------------------------------------ |
| `:organization_name` | The name of the organization the provider belongs to.                                                        |
| `:registry_name`     | Whether this is a publicly maintained provider or private. Must be either `public` or `private`.             |
| `:namespace`         | The namespace of the provider. For private providers this is the same as the `:organization_name` parameter. |
| `:name`              | The provider name.                                                                                           |

| Status  | Response                                             | Reason                                                    |
| ------- | ---------------------------------------------------- | --------------------------------------------------------- |
| [200][] | [JSON API document][] (`type: "registry-providers"`) | The request was successful                                |
| [403][] | [JSON API error object][]                            | Forbidden - public provider curation disabled             |
| [404][] | [JSON API error object][]                            | Provider not found or user unauthorized to perform action |

### Sample Request (Private Provider)

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws
```

### Sample Request (Public Provider)

```shell
curl \
  --request GET \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  https://app.terraform.io/api/v2/organizations/my-organization/registry-providers/public/hashicorp/aws
```
### Sample Response (Private Provider)

```json
{
  "data": {
    "id": "prov-cmEmLstBfjNNA9F3",
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "version-statuses": [
        {
          "version": "3.1.1"
        }
      ],
      "created-at": "2022-02-11T19:16:59.533Z",
      "updated-at": "2022-02-11T19:16:59.533Z",
      "registry-name": "private",
      "permissions": {
        "can-delete": true
      }
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "hashicorp",
          "type": "organizations"
        }
      },
      "versions": {
        "data": [
          {
            "id": "provver-y5KZUsSBRLV9zCtL",
            "type": "registry-provider-versions"
          }
        ],
        "links": {
          "related": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws"
    }
  }
}
```

### Sample Response (Public Provider)

```json
{
  "data": {
    "id": "prov-fZn7uHu99ZCpAKZJ",
    "type": "registry-providers",
    "attributes": {
      "name": "aws",
      "namespace": "hashicorp",
      "registry-name": "public",
      "created-at": "2020-07-09T19:36:56.288Z",
      "updated-at": "2020-07-09T20:16:20.538Z",
      "permissions": {
        "can-delete": true
      }
    },
    "relationships": {
      "organization": {
        "data": {
          "id": "my-organization",
          "type": "organizations"
        }
      }
    },
    "links": {
      "self": "/api/v2/organizations/my-organization/registry-providers/public/hashicorp/aws"
    }
  }
}
```

## Delete a Provider

`DELETE /organizations/:organization_name/registry-providers/:registry_name/:namespace/:name`

### Parameters

| Parameter            | Description                                                                                                                                                                                                  |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `:organization_name` | The name of the organization to delete a provider from. The organization must already exist, and the token authenticating the API request must belong to the "owners" team or a member of the "owners" team. |
| `:registry_name`     | Whether this is a publicly maintained provider or private. Must be either `public` or `private`.                                                                                                             |
| `:namespace`         | The namespace of the provider that will be deleted.                                                                                                                                                          |
| `:name`              | The name of the provider that will be deleted.                                                                                                                                                               |

[permissions-citation]: #intentionally-unused---keep-for-maintainers

| Status  | Response                  | Reason                                                      |
| ------- | ------------------------- | ----------------------------------------------------------- |
| [204][] | Nothing                   | Success                                                     |
| [403][] | [JSON API error object][] | Forbidden - public provider curation disabled               |
| [404][] | [JSON API error object][] | Provider not found or user not authorized to perform action |


### Sample Request (Private Provider)

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request DELETE \
  https://app.terraform.io/api/v2/organizations/hashicorp/registry-providers/private/hashicorp/aws
```

### Sample Request (Public Provider)

```shell
curl \
  --header "Authorization: Bearer $TOKEN" \
  --header "Content-Type: application/vnd.api+json" \
  --request DELETE \
  https://app.terraform.io/api/v2/organizations/my-organization/registry-providers/public/hashicorp/aws
```
